{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/highlight-app/context/AuthContext.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n  if (storedUser) \r\n    {setUser(storedUser);\r\n    }\r\n}, []);\r\n\r\n  // const register = (email, password) => {\r\n  //   const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n    \r\n  //   const userExists = users.find((u) => u.email === email);\r\n\r\n  //   if (userExists) {\r\n  //     alert(\"User already exists. Please login.\");\r\n  //     return false;\r\n  //   }\r\n    \r\n  //   users.push({ email, password, role: \"user\" });\r\n  //   localStorage.setItem(\"users\", JSON.stringify(users));\r\n    \r\n  //   return true;\r\n  // };\r\n\r\nconst login = (email, password) => {\r\n  const users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n  const found = users.find(\r\n    (u) => u.email === email && u.password === password\r\n    \r\n  );\r\n\r\n  if (found) {\r\n    localStorage.setItem(\"user\", JSON.stringify(found));\r\n    setUser(found); \r\n    const logs = JSON.parse(localStorage.getItem(\"userLogs\")) || [];\r\n\r\nlogs.push({\r\n  email: found.email,\r\n  role: found.role,\r\n  time: new Date().toLocaleString(),\r\n});\r\n\r\nlocalStorage.setItem(\"userLogs\", JSON.stringify(logs));\r\n  \r\n    return true;\r\n    \r\n  }\r\n\r\n  return false;\r\n  \r\n};\r\n\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"authUser\");\r\n    setUser(null);\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,4BAAc,IAAA,sNAAa;AAE1B,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACV,MAAM,aAAa,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC;QACnD,IAAI,YACF;YAAC,QAAQ;QACT;IACJ,GAAG,EAAE;IAEH,0CAA0C;IAC1C,mEAAmE;IAEnE,6DAA6D;IAE7D,sBAAsB;IACtB,mDAAmD;IACnD,oBAAoB;IACpB,MAAM;IAEN,mDAAmD;IACnD,0DAA0D;IAE1D,iBAAiB;IACjB,KAAK;IAEP,MAAM,QAAQ,CAAC,OAAO;QACpB,MAAM,QAAQ,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,aAAa,EAAE;QAC7D,MAAM,QAAQ,MAAM,IAAI,CACtB,CAAC,IAAM,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK;QAI7C,IAAI,OAAO;YACT,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,QAAQ;YACR,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,gBAAgB,EAAE;YAEnE,KAAK,IAAI,CAAC;gBACR,OAAO,MAAM,KAAK;gBAClB,MAAM,MAAM,IAAI;gBAChB,MAAM,IAAI,OAAO,cAAc;YACjC;YAEA,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;YAE5C,OAAO;QAET;QAEA,OAAO;IAET;IAGE,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;QAAO;kBAChD;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC"}}]
}